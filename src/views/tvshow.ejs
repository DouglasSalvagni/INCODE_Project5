<%- include('../partials/head') %> 
<body class="position-relative">

    <header class="container mb-3">
        <%- include('../partials/header',{title:'TV Show Page', user:user}) %> 
    </header>

    <main class="container pt-5">
        <div class="">

            <% if(tvshow) { %> 

                  <div class="card">
                    <img src="<%= tvshow.img %>" class="card-img-top" alt="..." style="height: 500px; object-fit: cover;">
                    <div class="card-body">
                      <h5 class="card-title">
                          <a><%= tvshow.title%></a>
                      </h5>
                      <h5 class="card-title text-secondary">
                          Community score: 
                            <%= 
                            tvshow.totalScore > 0 ?
                                (tvshow.totalScore / tvshow.totalVotes).toFixed(1)
                                :
                                0
                            
                            %>
                      </h5>
                      <h5 class="card-title text-secondary">
                          Total vote: <%= tvshow.totalVotes%>
                      </h5>

                      <% if(user) {%> 
                        <form action="/tvshow/<%= tvshow.tvshowID%>" method="POST">

                            <select class="mb-3 form-select" name="rating">
                                <option value="0" disabled>Rating</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>

                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary">
                                    Give your rating
                                </button>
                            </div>

                        </form>

                      <% } %> 
                    </div>
                  </div>

            <% } %> 

        </div>
    </main>

    <div class="toast-container position-absolute top-0 end-0 p-3">
        <!-- Then put toasts within -->
        <div id="message" class="toast bg-danger align-items-center" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
              <div class="toast-body text-white">
                <%= message %> 
             </div>
              <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>
    
    <footer>
    </footer>
    <%- include('../partials/scripts') %> 
</body>

<%- include('../partials/bottom') %> 